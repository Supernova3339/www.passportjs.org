<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Strategy | passport-local API Reference</title>
    <link rel="stylesheet" href="/assets/styles/all.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-73332146-2', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="container"><span id="top"></span>
      <div id="toolbar">
        <div class="toolbar-search">
          <form action="/search">
            <button type="submit"></button>
            <input type="text" name="q" placeholder="Search for Strategies">
          </form>
        </div>
        <div class="toolbar-social">
          <ul>
            <li class="facebook"><a href="https://www.facebook.com/passportjs" target="_blank"></a></li>
            <li class="twitter"><a href="https://twitter.com/passportjs" target="_blank"></a></li>
            <li class="github"><a href="https://github.com/jaredhanson/passport" target="_blank"><span class="count">0</span></a></li>
          </ul>
        </div>
      </div>
      <nav id="menu"><a class="menu-logo" href="/" title="Passport.js"></a>
        <div class="menu-trigger"><span></span></div>
        <div class="menu-items">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/docs/">Documentation</a></li>
            <li><a href="/features/">Features</a></li>
            <li><a href="/packages/">Strategies</a></li>
            <li><a href="/sponsors/">Sponsors</a></li>
          </ul><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=passportjsorg" id="_carbonads_js"></script>
        </div>
      </nav>
      <div id="content">
        <div class="api">
          <nav>
            <h2><a href="index.html">passport-local</a></h2><h3><a href="/api/passport-local/1.x/strategy/">Strategy</a></h3><h4>Properties</h4><ul><li>.name</li></ul><h4>Methods</h4><ul><li>.authenticate()</li></ul>
          </nav><a id="go-top" href="#top"><i class="icon-budicon-462"></i></a>
          <div class="contents">
            <h1>Strategy</h1>
            




<section>
  <header>
  
    <h2><span class="attribs"><span class="type-signature"></span></span>Strategy</h2>
    
      <p>A <code>Strategy</code> that is responsible for authenticating requests that
carry a username and password in the body of the request.  These credentials
are typically submitted by the user via an HTML form.</p>
    
  
  </header>

  <article>
    <div class="container-overview">
    
      


  
    <h4 class="name" id="Strategy"><span class="type-signature"></span>new Strategy<span class="signature">([options], verify)</span><span class="type-signature"></span></h4>
  
  









  


<ul>
  
  <li>
    
      <code>options</code>
    
    
    
        
<span class="param-type">&lt;Object></span>



    
    
    
    
    
    
    
      


<ul>
  
  <li>
    
      <code>usernameField</code>
    
    
    
        
<span class="param-type">&lt;string></span>



    
    
    <p>Form field name where
the username is found.</p>
    
    
      
          <strong>Default:</strong> <code>'username'</code>.
      
    
    
    
    
  </li>

  
  <li>
    
      <code>passwordField</code>
    
    
    
        
<span class="param-type">&lt;string></span>



    
    
    <p>Form field name where
the password is found.</p>
    
    
      
          <strong>Default:</strong> <code>'password'</code>.
      
    
    
    
    
  </li>

  
  <li>
    
      <code>passReqToCallback</code>
    
    
    
        
<span class="param-type">&lt;boolean></span>



    
    
    <p>When <code>true</code>, the
<code>verify</code> function receives the request object as the first argument,
in accordance with <code><a href="/api/passport-local/1.x/strategy/#~verifyWithReqFn">Strategy~verifyWithReqFn</a></code>.</p>
    
    
      
          <strong>Default:</strong> <code>false</code>.
      
    
    
    
    
  </li>

  
</ul>


    
    
  </li>

  
  <li>
    
      <code>verify</code>
    
    
    
        
<span class="param-type"><a href="/api/passport-local/1.x/strategy/#~verifyFn">&lt;Strategy~verifyFn></a></span>
|

<span class="param-type"><a href="/api/passport-local/1.x/strategy/#~verifyWithReqFn">&lt;Strategy~verifyWithReqFn></a></span>



    
    
    <p>Function which
verifies username and password.</p>
    
    
    
    
    
  </li>

  
</ul>





  <p>Create a new <code>Strategy</code> object.</p>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>

















    


  <pre><code>var LocalStrategy = require('passport-local').Strategy;

new LocalStrategy(function(username, password, cb) {
  users.findOne({ username: username }, function(err, user) {
    if (err) { return cb(err); }
    if (!user) { return cb(null, false, { message: 'Incorrect username or password.' }); }

    crypto.pbkdf2(password, user.salt, 310000, 32, 'sha256', function(err, hashedPassword) {
      if (err) { return cb(err); }
      if (!crypto.timingSafeEqual(user.hashedPassword, hashedPassword)) {
        return cb(null, false, { message: 'Incorrect username or password.' });
      }
      return cb(null, user);
    });
  });
});</code></pre>


  <pre><code>var LocalStrategy = require('passport-local');

new LocalStrategy(function(username, password, cb) {
  // ...
});</code></pre>

  <i>Construct strategy using top-level export.</i>





    
    </div>
    
    
    
      


  <ul>
  
    <li>Extends: &lt;base.Strategy></li>
  
  </ul>


    
    
    
    
    
    
    
    
    
    
    
    
    
      <h3 class="subsection-title">Members</h3>
      
        
<h4 class="name" id="name"><span class="type-signature">(readonly) </span>name<span class="type-signature"> :string</span></h4>




<div class="description">
  <p>The name of the strategy, which is set to <code>'local'</code>.</p>
</div>



  <h5>Type:</h5>
  <ul>
    <li>
      
<span class="param-type">&lt;string></span>



    </li>
  </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>






      
    
    
    
      <h3>Methods</h3>
      
        


  
    <h4 class="name" id="authenticate"><span class="type-signature">(protected) </span>authenticate<span class="signature">(req, [options])</span><span class="type-signature"></span></h4>
  
  









  


<ul>
  
  <li>
    
      <code>req</code>
    
    
    
        
<span class="param-type">&lt;http.IncomingMessage></span>



    
    
    <p>The Node.js <a href="https://nodejs.org/api/http.html#class-httpincomingmessage"><code>IncomingMessage</code></a>
object.</p>
    
    
    
    
    
  </li>

  
  <li>
    
      <code>options</code>
    
    
    
        
<span class="param-type">&lt;Object></span>



    
    
    
    
    
    
    
      


<ul>
  
  <li>
    
      <code>badRequestMessage</code>
    
    
    
        
<span class="param-type">&lt;string></span>



    
    
    <p>Message
to display when a request does not include a username or password.
Used in conjunction with <code>failureMessage</code> or <code>failureFlash</code> options.</p>
    
    
      
          <strong>Default:</strong> <code>'Missing credentials'</code>.
      
    
    
    
    
  </li>

  
</ul>


    
    
  </li>

  
</ul>





  <p>Authenticate request by verifying username and password.</p>
<p>This function is protected, and should not be called directly.  Instead,
use <code>passport.authenticate()</code> middleware and specify the <a href="/api/passport-local/1.x/strategy/#name"><code>name</code></a>
of this strategy and any options.</p>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>

















    


  <pre><code>passport.authenticate('local');</code></pre>





      
    
    
    
      <h3 class="subsection-title">Type Definitions</h3>
      
          


  
    <h4 class="name" id="~verifyFn"><span class="type-signature"></span>verifyFn<span class="signature">(username, password, cb)</span><span class="type-signature"></span></h4>
  
  









  


<ul>
  
  <li>
    
      <code>username</code>
    
    
    
        
<span class="param-type">&lt;string></span>



    
    
    <p>The username received in the request.</p>
    
    
    
    
    
  </li>

  
  <li>
    
      <code>password</code>
    
    
    
        
<span class="param-type">&lt;string></span>



    
    
    <p>The passport received in the request.</p>
    
    
    
    
    
  </li>

  
  <li>
    
      <code>cb</code>
    
    
    
        
<span class="param-type">&lt;function></span>



    
    
    
    
    
    
    
      


<ul>
  
  <li>
    
      <code>err</code>
    
    
    
        
<span class="param-type">&lt;Error></span>



    
    
    <p>An <code>Error</code> if an error occured; otherwise <code>null</code>.</p>
    
    
    
    
    
  </li>

  
  <li>
    
      <code>user</code>
    
    
    
        
<span class="param-type">&lt;Object></span>
|

<span class="param-type">&lt;boolean></span>



    
    
    <p>An <code>Object</code> representing the authenticated
user if verification was successful; otherwise <code>false</code>.</p>
    
    
    
    
    
  </li>

  
  <li>
    
      <code>info</code>
    
    
    
        
<span class="param-type">&lt;Object></span>



    
    
    <p>Additional application-specific context that will be
passed through for additional request processing.</p>
    
    
    
    
    
  </li>

  
</ul>


    
    
  </li>

  
</ul>





  <p>Verifies <code>username</code> and <code>password</code> and yields authenticated user.</p>
<p>This function is called by <code><a href="/api/passport-local/1.x/strategy/">Strategy</a></code> to verify a username and
password, and must invoke <code>cb</code> to yield the result.</p>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


















        
          


  
    <h4 class="name" id="~verifyWithReqFn"><span class="type-signature"></span>verifyWithReqFn<span class="signature">(req, username, password, cb)</span><span class="type-signature"></span></h4>
  
  









  


<ul>
  
  <li>
    
      <code>req</code>
    
    
    
        
<span class="param-type">&lt;http.IncomingMessage></span>



    
    
    <p>The Node.js <a href="https://nodejs.org/api/http.html#class-httpincomingmessage"><code>IncomingMessage</code></a>
object.</p>
    
    
    
    
    
  </li>

  
  <li>
    
      <code>username</code>
    
    
    
        
<span class="param-type">&lt;string></span>



    
    
    <p>The username received in the request.</p>
    
    
    
    
    
  </li>

  
  <li>
    
      <code>password</code>
    
    
    
        
<span class="param-type">&lt;string></span>



    
    
    <p>The passport received in the request.</p>
    
    
    
    
    
  </li>

  
  <li>
    
      <code>cb</code>
    
    
    
        
<span class="param-type">&lt;function></span>



    
    
    
    
    
    
    
      


<ul>
  
  <li>
    
      <code>err</code>
    
    
    
        
<span class="param-type">&lt;Error></span>



    
    
    <p>An <code>Error</code> if an error occured; otherwise <code>null</code>.</p>
    
    
    
    
    
  </li>

  
  <li>
    
      <code>user</code>
    
    
    
        
<span class="param-type">&lt;Object></span>
|

<span class="param-type">&lt;boolean></span>



    
    
    <p>An <code>Object</code> representing the authenticated
user if verification was successful; otherwise <code>false</code>.</p>
    
    
    
    
    
  </li>

  
  <li>
    
      <code>info</code>
    
    
    
        
<span class="param-type">&lt;Object></span>



    
    
    <p>Additional application-specific context that will be
passed through for additional request processing.</p>
    
    
    
    
    
  </li>

  
</ul>


    
    
  </li>

  
</ul>





  <p>Verifies <code>username</code> and <code>password</code> and yields authenticated user.</p>
<p>This function is called by <code><a href="/api/passport-local/1.x/strategy/">Strategy</a></code> to verify a username and
password when the <code>passReqToCallback</code> option is set, and must invoke <code>cb</code> to
yield the result.</p>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


















        
    
    
    
  </article>

</section>





          </div>
        </div>
      </div>
    </div>
  </body>
</html>