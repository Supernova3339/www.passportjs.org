<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#" lang="en">
  <head>
    <title>passport-appleid</title>
    <meta charset="utf-8">
    <meta name="description" content="Apple authentication strategy for Passport.">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="canonical" href="https://www.passportjs.org/packages/passport-appleid/">
    <link rel="manifest" href="/manifest.webmanifest"/>
    <meta name="theme-color" content="#35DF79"/>
    <link rel="shortcut icon" href="/images/favicon/favicon.ico"/>
    <link rel="icon" sizes="16x16" type="image/png" href="/images/favicon/favicon-16x16.png"/>
    <link rel="icon" sizes="32x32" type="image/png" href="/images/favicon/favicon-32x32.png"/>
    <link rel="icon" sizes="36x36" type="image/png" href="/images/favicon/android-icon-36x36.png"/>
    <link rel="icon" sizes="48x48" type="image/png" href="/images/favicon/android-icon-48x48.png"/>
    <link rel="icon" sizes="70x70" type="image/png" href="/images/favicon/ms-icon-70x70.png"/>
    <link rel="icon" sizes="72x72" type="image/png" href="/images/favicon/android-icon-72x72.png"/>
    <link rel="icon" sizes="96x96" type="image/png" href="/images/favicon/android-icon-96x96.png"/>
    <link rel="icon" sizes="144x144" type="image/png" href="/images/favicon/ms-icon-144x144.png"/>
    <link rel="icon" sizes="150x150" type="image/png" href="/images/favicon/ms-icon-150x150.png"/>
    <link rel="icon" sizes="192x192" type="image/png" href="/images/favicon/android-icon-192x192.png"/>
    <link rel="icon" sizes="310x310" type="image/png" href="/images/favicon/ms-icon-310x310.png"/>
    <link rel="apple-touch-icon" href="/images/favicon/apple-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicon/apple-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicon/apple-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon/apple-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/apple-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/apple-icon-152x152.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-icon-180x180.png"/>
    <meta name="msapplication-config" content="/browserconfig.xml"/>
    <meta name="msapplication-TileColor" content="#35DF79"/>
    <meta name="msapplication-TileImage" content="/images/favicon/ms-icon-144x144.png"/>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="passport-appleid"/>
    <meta property="og:description" content="Apple authentication strategy for Passport."/>
    <meta property="og:url" content="https://www.passportjs.org/packages/passport-appleid/"/>
    <meta property="og:image" content="https://www.passportjs.org/images/facebook-card.png"/>
    <meta property="og:image:type" content="image/png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    <meta property="og:site_name" content="Passport.js"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@passportjs"/>
    <meta name="twitter:title" content="passport-appleid"/>
    <meta name="twitter:description" content="Apple authentication strategy for Passport."/>
    <meta name="twitter:image" content="https://www.passportjs.org/images/twitter-card.png"/>
    <meta name="flattr:id" content="d5znvd"/>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-73332146-2', 'auto');
      ga('send', 'pageview');
    </script>
    <!--+google-tag-manager('GTM-M5S3PH')-->
    <!--link(type='text/css', rel='stylesheet', href='http://fast.fonts.net/cssapi/7527d73a-ebfe-45db-a201-ff2812df4b18.css')-->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
    <link rel="stylesheet" href="/assets/styles/all.css">
    <script data-main="/script/main" src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.js"></script>
  </head>
  <body>
    <div id="container"><span id="top"></span>
      <div id="toolbar">
        <div class="toolbar-search">
          <form action="/search">
            <button type="submit"></button>
            <input type="text" name="q" placeholder="Search for Strategies">
          </form>
        </div>
        <div class="toolbar-social">
          <ul>
            <li class="facebook"><a href="https://www.facebook.com/passportjs" target="_blank"></a></li>
            <li class="twitter"><a href="https://twitter.com/passportjs" target="_blank"></a></li>
            <li class="github"><a href="https://github.com/jaredhanson/passport" target="_blank"><span class="count">0</span></a></li>
          </ul>
        </div>
      </div>
      <nav id="menu"><a class="menu-logo" href="/" title="Passport.js"></a>
        <div class="menu-trigger"><span></span></div>
        <div class="menu-items">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/docs/">Documentation</a></li>
            <li><a href="/features/">Features</a></li>
            <li><a href="/packages/">Strategies</a></li>
            <li><a href="/sponsors/">Sponsors</a></li>
          </ul><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=passportjsorg" id="_carbonads_js"></script>
        </div>
      </nav>
      <div id="content">
        <div class="package hproduct" id="package">
          <div class="description"><h1 id="passport-appleid">passport-appleid</h1>
<p>Passport strategy for authenticating with Apple ID using the OAuth 2.0 API.</p>
<p>This module lets you authenticate using Apple ID in your Node.js applications. By plugging into Passport, Apple authentication can be easily integrated into any Node.JS application or framework that supports Connect-style middleware, including Express.</p>
<h2 id="prerequisites">Prerequisites</h2>
<ol>
<li>You should be enrolled in <a href="https://developer.apple.com/programs/">Apple Developer Program</a>.</li>
<li>Please have a look at <a href="https://developer.apple.com/sign-in-with-apple/get-started/">Apple documentation</a> related to &quot;Sign in with Apple&quot; feature.</li>
<li>You should create App ID and Service ID in your Apple Developer Account.</li>
<li>You should generate private key for your Service ID in your Apple Developer Account.</li>
</ol>
<p>More detail about configuration can be found in <a href="https://medium.com/@artyomefremov/add-sign-in-with-apple-button-to-your-website-today-part-1-12ed1444623a?postPublishedType=initial">blog post</a> and <a href="https://help.apple.com/developer-account/#/dev1c0e25352">Apple docs</a>.</p>
<h2 id="installation">Installation</h2>
<p>Install the module using <a href="http://npmjs.com">npm</a>:</p>
<pre><code class="lang-bash">npm install --save passport-appleid
</code></pre>
<h2 id="usage">Usage</h2>
<h3 id="configure-strategy">Configure Strategy</h3>
<p>The Apple authentication strategy authenticates users using Apple ID and OAuth 2.0 tokens. The Apple Service ID, Apple Team ID, and private key can be obtained in Apple Developer Account. The strategy also requires a verify callback, which receives the access token and optional refresh token, as well as profile which contains the authenticated user&#39;s Apple profile. The verify callback must call done providing a user to complete authentication.</p>
<pre><code class="lang-javascript"><span class="keyword">const</span> AppleStrategy = <span class="built_in">require</span>(<span class="string">"passport-appleid"</span>);

passport.use(<span class="keyword">new</span> AppleStrategy({
    <span class="attr">clientID</span>: APPLE_SERVICE_ID,
    <span class="attr">callbackURL</span>: <span class="string">'https://www.example.net/auth/apple/callback'</span>,
    <span class="attr">teamId</span>: APPLE_TEAM_ID,
    <span class="attr">keyIdentifier</span>: <span class="string">'RB1233456'</span>,
    <span class="attr">privateKeyPath</span>: path.join(__dirname, <span class="string">"./AuthKey_RB1233456.p8"</span>)
  }, 
  <span class="function"><span class="keyword">function</span>(<span class="params">accessToken, refreshToken, profile, done</span>) </span>{
    <span class="keyword">const</span> id = profile.id;
    User.findOrCreate(..., <span class="function"><span class="keyword">function</span> (<span class="params">err, user</span>) </span>{
        done(err, user);
    });
  }
}));
</code></pre>
<h3 id="authenticate-requests">Authenticate Requests</h3>
<p>Use <code>passport.authenticate()</code>, specifying the &#39;apple&#39; strategy, to authenticate requests.</p>
<p>For example, as route middleware in an <a href="http://expressjs.com">Express</a> application:</p>
<pre><code class="lang-javascript">app.get(<span class="string">'/auth/apple'</span>,
  passport.authenticate(<span class="string">'apple'</span>));

app.get(<span class="string">'/auth/apple/callback'</span>,
  passport.authenticate(<span class="string">'apple'</span>, { <span class="attr">failureRedirect</span>: <span class="string">'/login'</span> }),
  <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>{
    <span class="comment">// Successful authentication, redirect home.</span>
    res.redirect(<span class="string">'/'</span>);
  });
</code></pre>
<h2 id="examples">Examples</h2>
<p>Developers using the popular <a href="http://expressjs.com">Express</a> web framework can refer to an <a href="https://github.com/Techofficer/express-apple-signin-example">example</a> as a starting point for their own web applications. </p>
<p>You can also check <a href="http://apple-auth.gotechmakers.com">live example</a></p>
<h2 id="contributing">Contributing</h2>
<p>Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.</p>
<h2 id="license">License</h2>
<p><a href="https://choosealicense.com/licenses/mit/">The MIT License</a></p>
<p>Copyright (c) 2019 Artem Efremov <a href="https://gotechmakers.com">https://gotechmakers.com</a></p>
<h2 id="support">Support</h2>
<p>If you have any questions or need help with integration, then you can contact me by email <a href="efremov.artserg@gmail.com">efremov.artserg@gmail.com</a>.</p>
</div>
          <div class="metadata">
            <div class="install"><code>npm install <span class="fn">passport-appleid</span></code></div>
            <ul>
              <li><span class="version">1.0.5</span> published <abbr class="updated" title="2022-05-12T15:31:18Z">2 months ago</abbr></li>
              <li><a class="url" href="https://github.com/Techofficer/passport-apple">https://github.com/Techofficer/passport-apple#readme</a></li>
              <li><a rel="licence" href="http://www.opensource.org/licenses/MIT">MIT License</a></li>
            </ul>
            <ul>
              <li><b>283</b> downloads in the last day</li>
              <li><b>1,880</b> downloads in the last week</li>
              <li><b>8,141</b> downloads in the last month</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="search-con">
      <div class="head"><span class="close-ico"></span>
        <div class="hold">
          <h2>SEARCH FOR STRATEGIES</h2>
          <form action="/">
            <input value="" type="text" name="strategy" placeholder="Start typing" autocomplete="off">
          </form>
          <p class="info-line"><span>0</span>STRATEGIES</p>
        </div>
      </div>
      <div class="results">
        <section></section>
      </div>
    </div>
    <!--+google-tag-manager-noscript('GTM-M5S3PH')-->
  </body>
</html>