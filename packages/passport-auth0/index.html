<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#" lang="en">
  <head>
    <title>passport-auth0</title>
    <meta charset="utf-8">
    <meta name="description" content="Auth0 platform authentication strategy for Passport.js">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="canonical" href="https://www.passportjs.org/packages/passport-auth0/">
    <link rel="manifest" href="/manifest.webmanifest"/>
    <meta name="theme-color" content="#35DF79"/>
    <link rel="shortcut icon" href="/images/favicon/favicon.ico"/>
    <link rel="icon" sizes="16x16" type="image/png" href="/images/favicon/favicon-16x16.png"/>
    <link rel="icon" sizes="32x32" type="image/png" href="/images/favicon/favicon-32x32.png"/>
    <link rel="icon" sizes="36x36" type="image/png" href="/images/favicon/android-icon-36x36.png"/>
    <link rel="icon" sizes="48x48" type="image/png" href="/images/favicon/android-icon-48x48.png"/>
    <link rel="icon" sizes="70x70" type="image/png" href="/images/favicon/ms-icon-70x70.png"/>
    <link rel="icon" sizes="72x72" type="image/png" href="/images/favicon/android-icon-72x72.png"/>
    <link rel="icon" sizes="96x96" type="image/png" href="/images/favicon/android-icon-96x96.png"/>
    <link rel="icon" sizes="144x144" type="image/png" href="/images/favicon/ms-icon-144x144.png"/>
    <link rel="icon" sizes="150x150" type="image/png" href="/images/favicon/ms-icon-150x150.png"/>
    <link rel="icon" sizes="192x192" type="image/png" href="/images/favicon/android-icon-192x192.png"/>
    <link rel="icon" sizes="310x310" type="image/png" href="/images/favicon/ms-icon-310x310.png"/>
    <link rel="apple-touch-icon" href="/images/favicon/apple-icon-57x57.png"/>
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicon/apple-icon-60x60.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicon/apple-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon/apple-icon-76x76.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicon/apple-icon-114x114.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon/apple-icon-120x120.png"/>
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon/apple-icon-144x144.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon/apple-icon-152x152.png"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-icon-180x180.png"/>
    <meta name="msapplication-config" content="/browserconfig.xml"/>
    <meta name="msapplication-TileColor" content="#35DF79"/>
    <meta name="msapplication-TileImage" content="/images/favicon/ms-icon-144x144.png"/>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="passport-auth0"/>
    <meta property="og:description" content="Auth0 platform authentication strategy for Passport.js"/>
    <meta property="og:url" content="https://www.passportjs.org/packages/passport-auth0/"/>
    <meta property="og:image" content="https://www.passportjs.org/images/facebook-card.png"/>
    <meta property="og:image:type" content="image/png"/>
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    <meta property="og:site_name" content="Passport.js"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@passportjs"/>
    <meta name="twitter:title" content="passport-auth0"/>
    <meta name="twitter:description" content="Auth0 platform authentication strategy for Passport.js"/>
    <meta name="twitter:image" content="https://www.passportjs.org/images/twitter-card.png"/>
    <meta name="flattr:id" content="d5znvd"/>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-73332146-2', 'auto');
      ga('send', 'pageview');
    </script>
    <!--+google-tag-manager('GTM-M5S3PH')-->
    <!--link(type='text/css', rel='stylesheet', href='http://fast.fonts.net/cssapi/7527d73a-ebfe-45db-a201-ff2812df4b18.css')-->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
    <link rel="stylesheet" href="/assets/styles/all.css">
    <script data-main="/script/main" src="//cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.js"></script>
  </head>
  <body>
    <div id="container"><span id="top"></span>
      <div id="toolbar">
        <div class="toolbar-search">
          <form action="/search">
            <button type="submit"></button>
            <input type="text" name="q" placeholder="Search for Strategies">
          </form>
        </div>
        <div class="toolbar-social">
          <ul>
            <li class="facebook"><a href="https://www.facebook.com/passportjs" target="_blank"></a></li>
            <li class="twitter"><a href="https://twitter.com/passportjs" target="_blank"></a></li>
            <li class="github"><a href="https://github.com/jaredhanson/passport" target="_blank"><span class="count">0</span></a></li>
          </ul>
        </div>
      </div>
      <nav id="menu"><a class="menu-logo" href="/" title="Passport.js"></a>
        <div class="menu-trigger"><span></span></div>
        <div class="menu-items">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/docs/">Documentation</a></li>
            <li><a href="/features/">Features</a></li>
            <li><a href="/packages/">Strategies</a></li>
          </ul><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=passportjsorg" id="_carbonads_js"></script>
        </div>
      </nav>
      <div id="content">
        <div class="package hproduct" id="package">
          <div class="description"><h1 id="passport-auth0">passport-auth0</h1>
<blockquote>
<p>:information_source:  <strong>Maintenance Advisory:</strong>  With the release of <a href="https://github.com/auth0/express-openid-connect">https://github.com/auth0/express-openid-connect</a>, we will no longer be adding new features to this library, however we will continue to maintain this library and fix issues.  You can read more about the release of our new library at <a href="https://auth0.com/blog/auth0-s-express-openid-connect-sdk/">https://auth0.com/blog/auth0-s-express-openid-connect-sdk/</a></p>
</blockquote>
<p>This is the <a href="https://auth0.com/">Auth0</a> authentication strategy for <a href="http://passportjs.org/">Passport.js</a>. Passport is authentication middleware for Node.js that can be unobtrusively dropped into any Express-based web application.</p>
<p>For Management API endpoints, please see the <a href="https://github.com/auth0/node-auth0">Node Auth0 SDK</a>.</p>
<p><a href="https://circleci.com/gh/auth0/passport-auth0/tree/master"><img src="https://circleci.com/gh/auth0/passport-auth0/tree/master.svg?style=svg" alt="Build Status"></a>
<a href="https://npmjs.org/package/passport-auth0"><img src="https://img.shields.io/npm/v/passport-auth0" alt="npm"></a>
<a href="https://npmjs.org/package/passport-auth0"><img src="https://img.shields.io/npm/dm/passport-auth0" alt="npm"></a>
<a href="https://opensource.org/licenses/MIT"><img src="http://img.shields.io/:license-mit-blue.svg?style=flat" alt="License"></a>
<a href="https://app.fossa.com/projects/git%2Bgithub.com%2Fauth0%2Fpassport-auth0?ref=badge_shield"><img src="https://app.fossa.com/api/projects/git%2Bgithub.com%2Fauth0%2Fpassport-auth0.svg?type=shield" alt="FOSSA Status"></a></p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#customization">Customization</a></li>
<li><a href="#support--feedback">Support + Feedback</a></li>
<li><a href="#vulnerability-reporting">Vulnerability Reporting</a></li>
<li><a href="#what-is-auth0">What is Auth0</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 id="documentation">Documentation</h2>
<p>Full documentation with examples can be found in the <a href="https://auth0.com/docs/quickstart/webapp/nodejs">Node.js Quickstart</a>. </p>
<p>You can also see fully working demos using this library in our <a href="https://auth0.com/blog/">Auth0 blog</a>:</p>
<ul>
<li><a href="https://auth0.com/blog/building-and-authenticating-nodejs-apps/#nodejs-directory-structure">Build and Authenticate a Node.js App with JSON Web Tokens</a></li>
<li><a href="https://auth0.com/blog/developing-a-real-time-collaborative-editor-with-pusher/">Developing a Real-Time, Collaborative Editor with Pusher</a></li>
</ul>
<h2 id="installation">Installation</h2>
<p>The Auth0 Passport strategy is installed with npm. </p>
<pre><code><span class="title">npm</span> install pass<span class="keyword">port</span>-auth0
</code></pre><h2 id="customization">Customization</h2>
<h3 id="state-parameter">State parameter</h3>
<p>The Auth0 Passport strategy enforces the use of the <code>state</code> parameter in OAuth 2.0 <a href="https://tools.ietf.org/html/rfc6749#section-4.1.1">authorization requests</a> and requires session support in Express to be enabled.</p>
<p>If you require the <code>state</code> parameter to be omitted (which is not recommended), you can suppress it when calling the Auth0 Passport strategy constructor:</p>
<pre><code class="lang-js"><span class="keyword">const</span> Auth0Strategy = <span class="built_in">require</span>(<span class="string">'passport-auth0'</span>);
<span class="keyword">const</span> strategy = <span class="keyword">new</span> Auth0Strategy({
     <span class="comment">// ...</span>
     <span class="attr">state</span>: <span class="literal">false</span>
  },
  <span class="function"><span class="keyword">function</span>(<span class="params">accessToken, refreshToken, extraParams, profile, done</span>) </span>{
    <span class="comment">// ...</span>
  }
);
</code></pre>
<p><a href="https://github.com/auth0/passport-auth0/issues/40#issuecomment-511592801">More on state handling here</a>.</p>
<h3 id="scopes">Scopes</h3>
<p>If you want to change the scope of the ID token provided, add a <code>scope</code> property to the authenticate configuration passed when defining the route. These must be <a href="https://auth0.com/docs/scopes/current/oidc-scopes">OIDC standard scopes</a>. If you need data outside of the standard scopes, you can add <a href="https://auth0.com/docs/scopes/current/custom-claims">custom claims</a> to the token.</p>
<pre><code class="lang-js">app.get(
    <span class="string">'/login'</span>,
    passport.authenticate(<span class="string">'auth0'</span>, {<span class="attr">scope</span>: <span class="string">'openid email profile'</span>}), 
    <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>{
        res.redirect(<span class="string">'/'</span>);
    }
);
</code></pre>
<h3 id="force-a-specific-idp">Force a Specific IdP</h3>
<p>If you want to force a specific identity provider you can use:</p>
<pre><code class="lang-js">app.get(
    <span class="string">'/login/google'</span>,
    passport.authenticate(<span class="string">'auth0'</span>, {<span class="attr">connection</span>: <span class="string">'google-oauth2'</span>}), 
    <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>{
        res.redirect(<span class="string">'/'</span>);
    }
);
</code></pre>
<p>If you force an identity provider you can also request custom scope from that identity provider:</p>
<pre><code class="lang-js">app.get(
    <span class="string">'/login/google'</span>, 
    passport.authenticate(<span class="string">'auth0'</span>, {
        <span class="attr">connection</span>: <span class="string">'google-oauth2'</span>,
        <span class="attr">connection_scope</span>: <span class="string">'https://www.googleapis.com/auth/analytics, https://www.googleapis.com/auth/contacts.readonly'</span>
    }), 
    <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>{
        res.redirect(<span class="string">'/'</span>);
    }
);
</code></pre>
<h3 id="getting-access-tokens">Getting Access Tokens</h3>
<p>If you want to specify an audience for the returned <code>access_token</code> you can:</p>
<pre><code class="lang-js">app.get(
    <span class="string">'/login'</span>,
    passport.authenticate(<span class="string">'auth0'</span>, {<span class="attr">audience</span>: <span class="string">'urn:my-api'</span>}), 
    <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>{
      res.redirect(<span class="string">'/'</span>);
    }
);
</code></pre>
<h3 id="silent-authentication">Silent Authentication</h3>
<p>If you want to check authentication without showing a prompt:</p>
<pre><code class="lang-js">app.get(
    <span class="string">'/login'</span>,
    passport.authenticate(<span class="string">'auth0'</span>, {<span class="attr">prompt</span>: <span class="string">'none'</span>}), 
    <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>{
        res.redirect(<span class="string">'/'</span>);
    }
);
</code></pre>
<h2 id="support-feedback">Support + Feedback</h2>
<ul>
<li>Use <a href="https://github.com/auth0/passport-auth0/issues">Issues</a> for code-level support</li>
<li>Use our <a href="https://community.auth0.com/">Community</a> for usage, questions, specific cases</li>
</ul>
<h2 id="vulnerability-reporting">Vulnerability Reporting</h2>
<p>Please do not report security vulnerabilities on the public GitHub issue tracker. The <a href="https://auth0.com/whitehat">Responsible Disclosure Program</a> details the procedure for disclosing security issues.</p>
<h2 id="what-is-auth0-">What is Auth0?</h2>
<p>Auth0 helps you to easily:</p>
<ul>
<li>implement authentication with multiple identity providers, including social (e.g., Google, Facebook, Microsoft, LinkedIn, GitHub, Twitter, etc), or enterprise (e.g., Windows Azure AD, Google Apps, Active Directory, ADFS, SAML, etc.)</li>
<li>log in users with username/password databases, passwordless, or multi-factor authentication</li>
<li>link multiple user accounts together</li>
<li>generate signed JSON Web Tokens to authorize your API calls and flow the user identity securely</li>
<li>access demographics and analytics detailing how, when, and where users are logging in</li>
<li>enrich user profiles from other data sources using customizable JavaScript rules</li>
</ul>
<p><a href="https://auth0.com/why-auth0">Why Auth0?</a></p>
<h2 id="license">License</h2>
<p>This project is licensed under the MIT license. See the <a href="LICENSE">LICENSE</a> file for more info.</p>
<p><a href="https://app.fossa.com/projects/git%2Bgithub.com%2Fauth0%2Fpassport-auth0?ref=badge_large"><img src="https://app.fossa.com/api/projects/git%2Bgithub.com%2Fauth0%2Fpassport-auth0.svg?type=large" alt="FOSSA Status"></a></p>
</div>
          <div class="metadata">
            <div class="install"><code>npm install <span class="fn">passport-auth0</span></code></div>
            <ul>
              <li><span class="version">1.4.2</span> published <abbr class="updated" title="2022-06-01T06:41:48Z">7 days ago</abbr></li>
              <li><a class="url" href="https://github.com/auth0/passport-auth0">https://github.com/auth0/passport-auth0#readme</a></li>
              <li><a rel="licence" href="http://www.opensource.org/licenses/MIT">MIT License</a></li>
            </ul>
            <ul>
              <li><b>5,962</b> downloads in the last day</li>
              <li><b>36,875</b> downloads in the last week</li>
              <li><b>140,196</b> downloads in the last month</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="search-con">
      <div class="head"><span class="close-ico"></span>
        <div class="hold">
          <h2>SEARCH FOR STRATEGIES</h2>
          <form action="/">
            <input value="" type="text" name="strategy" placeholder="Start typing" autocomplete="off">
          </form>
          <p class="info-line"><span>0</span>STRATEGIES</p>
        </div>
      </div>
      <div class="results">
        <section></section>
      </div>
    </div>
    <!--+google-tag-manager-noscript('GTM-M5S3PH')-->
  </body>
</html>